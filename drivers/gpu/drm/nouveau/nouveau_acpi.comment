crazy nested structs, scoping problem
